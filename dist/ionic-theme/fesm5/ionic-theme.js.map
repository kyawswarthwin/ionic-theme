{"version":3,"file":"ionic-theme.js.map","sources":["ng://ionic-theme/lib/ionic-theme.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport Color from 'color';\r\n\r\nexport interface IonicColors {\r\n  primary?: string;\r\n  secondary?: string;\r\n  tertiary?: string;\r\n  success?: string;\r\n  warning?: string;\r\n  danger?: string;\r\n  dark?: string;\r\n  medium?: string;\r\n  light?: string;\r\n  backgroundColor?: string;\r\n  textColor?: string;\r\n}\r\nexport interface CustomProperties {\r\n  [propertyName: string]: string;\r\n}\r\n\r\n// @dynamic\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IonicThemeService {\r\n  constructor(@Inject(DOCUMENT) private document: Document) {}\r\n\r\n  getPropertyValue(propertyName: string): string {\r\n    return this.document.documentElement.style.getPropertyValue(propertyName);\r\n  }\r\n\r\n  setProperty(propertyName: string, value: string | null, priority?: string | null): void {\r\n    this.document.documentElement.style.setProperty(propertyName, value, priority);\r\n  }\r\n\r\n  removeProperty(propertyName: string): string {\r\n    return this.document.documentElement.style.removeProperty(propertyName);\r\n  }\r\n\r\n  setTheme(colors?: IonicColors, properties?: CustomProperties): void {\r\n    const css = `${this.generateColor(colors)}\r\n${this.generateColorSteps(colors.backgroundColor, colors.textColor)}\r\n${this.generateCustomProperties(properties)}`;\r\n    this.setGlobalCSS(css);\r\n  }\r\n\r\n  private generateColor(colors: IonicColors): string {\r\n    return Object.entries(colors || {})\r\n      .filter(([name]) => {\r\n        const filter = [\r\n          'primary',\r\n          'secondary',\r\n          'tertiary',\r\n          'success',\r\n          'warning',\r\n          'danger',\r\n          'dark',\r\n          'medium',\r\n          'light'\r\n        ];\r\n        return filter.indexOf(name) > -1;\r\n      })\r\n      .map(([name, color]) => {\r\n        color = Color(color);\r\n        return `--ion-color-${name}: ${color.hex()};\r\n--ion-color-${name}-rgb: ${this.colorToRGB(color)};\r\n--ion-color-${name}-contrast: ${this.contrast(color).hex()};\r\n--ion-color-${name}-contrast-rgb: ${this.colorToRGB(this.contrast(color))};\r\n--ion-color-${name}-shade: ${this.shade(color).hex()};\r\n--ion-color-${name}-tint: ${this.tint(color).hex()};\r\n`;\r\n      })\r\n      .join('\\n');\r\n  }\r\n\r\n  private colorToRGB(color: Color): string {\r\n    return color\r\n      .rgb()\r\n      .array()\r\n      .join(', ');\r\n  }\r\n\r\n  private contrast(color: Color): Color {\r\n    const { r, g, b } = color.rgb().object();\r\n    return (r + g + b) / 3 > 128 ? Color('#fff') : Color('#000');\r\n  }\r\n\r\n  private shade(color: Color): Color {\r\n    return color.mix(Color('#000'), 0.12);\r\n  }\r\n\r\n  private tint(color: Color): Color {\r\n    return color.mix(Color('#fff'), 0.1);\r\n  }\r\n\r\n  private generateColorSteps(backgroundColor: string | Color, textColor: string | Color): string {\r\n    let result = '';\r\n    if (backgroundColor && textColor) {\r\n      backgroundColor = Color(backgroundColor);\r\n      textColor = Color(textColor);\r\n      result += `--ion-background-color: ${backgroundColor.hex()};\r\n--ion-background-color-rgb: ${this.colorToRGB(backgroundColor)};\r\n--ion-text-color: ${textColor.hex()};\r\n--ion-text-color-rgb: ${this.colorToRGB(textColor)};\r\n`;\r\n      for (let i = 50; i < 1000; i += 50) {\r\n        result += `--ion-color-step-${i}: ${textColor.mix(backgroundColor, 1 - i / 1000).hex()};\r\n`;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private setGlobalCSS(css: string): void {\r\n    this.document.documentElement.style.cssText = css;\r\n  }\r\n\r\n  private generateCustomProperties(properties: CustomProperties): string {\r\n    return Object.entries(properties || {})\r\n      .map(([propertyName, value]) => {\r\n        return `${propertyName}: ${value};`;\r\n      })\r\n      .join('\\n');\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
