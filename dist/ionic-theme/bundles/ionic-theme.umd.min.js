!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("rxjs"),require("color"),require("@ionic-native/status-bar/ngx"),require("@ionic-native/status-bar/ngx/index"),require("@angular/core"),require("ionic-settings")):"function"==typeof define&&define.amd?define("ionic-theme",["exports","@angular/common","rxjs","color","@ionic-native/status-bar/ngx","@ionic-native/status-bar/ngx/index","@angular/core","ionic-settings"],t):t(e["ionic-theme"]={},e.ng.common,e.rxjs,e.Color,e.ngx,e.i3,e.ng.core,e.i2)}(this,function(e,t,n,c,r,o,u,a){"use strict";c=c&&c.hasOwnProperty("default")?c["default"]:c;var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(n,o){var i,c,u,e,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function r(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,c&&(u=2&e[0]?c["return"]:e[0]?c["throw"]||((u=c["return"])&&u.call(c),0):c.next)&&!(u=u.call(c,e[1])).done)return u;switch(c=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,c=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){a.label=e[1];break}if(6===e[0]&&a.label<u[1]){a.label=u[1],u=e;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(e);break}u[2]&&a.ops.pop(),a.trys.pop();continue}e=o.call(n,a)}catch(t){e=[6,t],c=0}finally{i=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)c.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return c}var h=new u.InjectionToken("THEME_CONFIG"),p=function(){function e(e,t,r,n){this.config=e,this.document=t,this.settings=r,this.statusBar=n}return e.prototype.initialize=function(){var r=this;return new Promise(function(e,t){r.theme||(r.theme=new n.BehaviorSubject(r.getTheme(r.settings.get("theme",r.config.defaultTheme))),r.setTheme(r.theme.value)),e()})},e.prototype.getThemes=function(){return this.config.themes},e.prototype.getTheme=function(t){var e=this.config.themes.find(function(e){return e.name===t});if(!e)throw new Error("Theme Not Found");return e},e.prototype.isActiveTheme=function(e){return this.theme.value.name===e},e.prototype.getActiveTheme=function(){return this.theme.asObservable()},e.prototype.setActiveTheme=function(e){if(!this.isActiveTheme(e)){var t=this.getTheme(e);this.setTheme(t),this.theme.next(t)}},e.prototype.setTheme=function(e){var t=this.generateTheme(e);this.statusBar.backgroundColorByHexString(t["--ion-color-primary-shade"]),this.document.documentElement.style.cssText=Object.entries(t).reduce(function(e,t){var r=f(t,2);return e+(r[0]+": ")+r[1]+";"},""),this.settings.set("theme",e.name)},e.prototype.generateTheme=function(e){var i=this,t=s({},e.properties);if(e.colors&&(t=s({},t,Object.entries(e.colors).filter(function(e){var t=f(e,1)[0];return["primary","secondary","tertiary","success","warning","danger","light","medium","dark"].includes(t)}).map(function(e){var t,r=f(e,2),n=r[0],o=r[1];return o=c(o),(t={})["--ion-color-"+n]=o.hex(),t["--ion-color-"+n+"-rgb"]=i.colorToRGB(o),t["--ion-color-"+n+"-contrast"]=i.contrast(o).hex(),t["--ion-color-"+n+"-contrast-rgb"]=i.colorToRGB(i.contrast(o)),t["--ion-color-"+n+"-shade"]=i.shade(o).hex(),t["--ion-color-"+n+"-tint"]=i.tint(o).hex(),t}).reduce(function(e,t){return s({},e,t)},{})),e.colors.background&&e.colors.foreground)){var r=c(e.colors.background),n=c(e.colors.foreground);t["--ion-background-color"]=r.hex(),t["--ion-background-color-rgb"]=this.colorToRGB(r),t["--ion-text-color"]=n.hex(),t["--ion-text-color-rgb"]=this.colorToRGB(n);for(var o=50;o<1e3;o+=50)t["--ion-color-step-"+o]=n.mix(r,1-o/1e3).hex()}return t},e.prototype.colorToRGB=function(e){return e.rgb().array().join(", ")},e.prototype.contrast=function(e){var t=e.rgb().object(),r=t.r,n=t.g,o=t.b;return c(128<(r+n+o)/3?"#fff":"#000")},e.prototype.shade=function(e){return e.mix(c("#000"),.12)},e.prototype.tint=function(e){return e.mix(c("#fff"),.1)},e.decorators=[{type:u.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:u.Inject,args:[h]}]},{type:Document,decorators:[{type:u.Inject,args:[t.DOCUMENT]}]},{type:a.SettingsService},{type:r.StatusBar}]},e.ngInjectableDef=u.defineInjectable({factory:function(){return new e(u.inject(h),u.inject(t.DOCUMENT),u.inject(a.SettingsService),u.inject(o.StatusBar))},token:e,providedIn:"root"}),e}(),i=function(){function t(){}return t.forRoot=function(e){var i=this;return{ngModule:t,providers:[{provide:h,useValue:e},{provide:u.APP_INITIALIZER,useFactory:function(n,o){return function(){return new Promise(function(t,e){return function r(t,c,u,a){return new(u||(u=Promise))(function(e,r){function n(e){try{i(a.next(e))}catch(t){r(t)}}function o(e){try{i(a["throw"](e))}catch(t){r(t)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,o)}i((a=a.apply(t,c||[])).next())})}(i,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,n.initialize()];case 1:return e.sent(),[4,o.initialize()];case 2:return e.sent(),t(),[2]}})})})}},deps:[a.SettingsService,p],multi:!0}]}},t.decorators=[{type:u.NgModule}],t}();e.THEME_CONFIG=h,e.ThemeService=p,e.IonicThemeModule=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-theme.umd.min.js.map