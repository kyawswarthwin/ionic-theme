{"version":3,"file":"ionic-theme.js.map","sources":["ng://ionic-theme/lib/ionic-theme.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport Color from 'color';\r\n\r\nexport interface Theme {\r\n  colors?: IonicColors;\r\n  properties?: Properties;\r\n}\r\nexport interface IonicColors {\r\n  primary?: string;\r\n  secondary?: string;\r\n  tertiary?: string;\r\n  success?: string;\r\n  warning?: string;\r\n  danger?: string;\r\n  dark?: string;\r\n  medium?: string;\r\n  light?: string;\r\n  foreground?: string;\r\n  background?: string;\r\n}\r\nexport interface Properties {\r\n  [propertyName: string]: string;\r\n}\r\n\r\n// @dynamic\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IonicThemeService {\r\n  constructor(@Inject(DOCUMENT) private document: Document) {}\r\n\r\n  getPropertyValue(propertyName: string): string {\r\n    return window.getComputedStyle(this.document.documentElement).getPropertyValue(propertyName);\r\n  }\r\n\r\n  setProperty(propertyName: string, value: string | null, priority?: string | null): void {\r\n    this.document.documentElement.style.setProperty(propertyName, value, priority);\r\n  }\r\n\r\n  removeProperty(propertyName: string): string {\r\n    return this.document.documentElement.style.removeProperty(propertyName);\r\n  }\r\n\r\n  setTheme(theme: Theme): void {\r\n    this.document.documentElement.style.cssText = Object.entries(this.generateTheme(theme)).reduce(\r\n      (accumulator, [propertyName, value]) => {\r\n        return (accumulator += `${propertyName}: ${value};`);\r\n      },\r\n      ''\r\n    );\r\n  }\r\n\r\n  private generateTheme(theme: Theme): Properties {\r\n    let properties = { ...theme.properties };\r\n    if (theme.colors) {\r\n      properties = {\r\n        ...properties,\r\n        ...Object.entries(theme.colors)\r\n          .filter(([name]) => {\r\n            return [\r\n              'primary',\r\n              'secondary',\r\n              'tertiary',\r\n              'success',\r\n              'warning',\r\n              'danger',\r\n              'dark',\r\n              'medium',\r\n              'light'\r\n            ].includes(name);\r\n          })\r\n          .map(([name, color]) => {\r\n            color = Color(color);\r\n            return {\r\n              [`--ion-color-${name}`]: color.hex(),\r\n              [`--ion-color-${name}-rgb`]: this.colorToRGB(color),\r\n              [`--ion-color-${name}-contrast`]: this.contrast(color).hex(),\r\n              [`--ion-color-${name}-contrast-rgb`]: this.colorToRGB(this.contrast(color)),\r\n              [`--ion-color-${name}-shade`]: this.shade(color).hex(),\r\n              [`--ion-color-${name}-tint`]: this.tint(color).hex()\r\n            };\r\n          })\r\n          .reduce((accumulator, currentValue) => {\r\n            return { ...accumulator, ...currentValue };\r\n          }, {})\r\n      };\r\n      if (theme.colors.background && theme.colors.foreground) {\r\n        const backgroundColor = Color(theme.colors.background);\r\n        const foregroundColor = Color(theme.colors.foreground);\r\n        properties[`--ion-background-color`] = backgroundColor.hex();\r\n        properties[`--ion-background-color-rgb`] = this.colorToRGB(backgroundColor);\r\n        properties[`--ion-text-color`] = foregroundColor.hex();\r\n        properties[`--ion-text-color-rgb`] = this.colorToRGB(foregroundColor);\r\n        for (let i = 50; i < 1000; i += 50) {\r\n          properties[`--ion-color-step-${i}`] = foregroundColor\r\n            .mix(backgroundColor, 1 - i / 1000)\r\n            .hex();\r\n        }\r\n      }\r\n    }\r\n    return properties;\r\n  }\r\n\r\n  private colorToRGB(color: Color): string {\r\n    return color\r\n      .rgb()\r\n      .array()\r\n      .join(', ');\r\n  }\r\n\r\n  private contrast(color: Color): Color {\r\n    const { r, g, b } = color.rgb().object();\r\n    return (r + g + b) / 3 > 128 ? Color('#fff') : Color('#000');\r\n  }\r\n\r\n  private shade(color: Color): Color {\r\n    return color.mix(Color('#000'), 0.12);\r\n  }\r\n\r\n  private tint(color: Color): Color {\r\n    return color.mix(Color('#fff'), 0.1);\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}
